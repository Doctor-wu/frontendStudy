## 构造函数

### 什么是构造函数

函数被new操作符运行时作为自定义类/构造函数，构造函数做了很多普通函数没做的事情

### 构造函数执行

构造函数执行也具备普通函数执行的一面（也会有创建上下文初始化作用域链，初始化this，初始化arguments，形参赋值，变量提升，代码执行）



## new做了什么

### 创建一个空对象

### 初始化this时，让上下文中的this指向创建的实例对象

### 将该对象的\[[prototype]]属性设置为构造函数的原型

### 即使函数中没有return也会将创建的实例对象返回

如果用户有返回，但是返回的是基本类型值，默认返回的还是实例对象，如过用户返回的是引用类型值，则以用户return的为准

**Tips**

- 函数创建私有上下文后的第一件事不是初始化作用域链而是创建一个*空对象*
- new后面的函数不带小括号，属于不带参的new，只是没传递实参而已
- 带参数new优先级是19，不带是18



## 原型和原型链

- 每一个函数（构造函数[类]）都天生具备一个属性"prototype原型"，属性值是一个对象：存储当前类供实例调用的公共属性和方法
- 在原型对象上，有一个内置的属性"constructor"，存储的是当前函数本身，所以我们把类称为构造函数
- 每一个对象都天生具备一个属性"\__proto__隐式原型/原型链"，属性只想自己所属类的原型对象

### 原型链机制

访问对象的某个成员，首先看是否为私有的，如果是私有的，则找到的就是私有的；如果不是，则基于\__proto__找所属类.prototype上的公共属性方法...如果还是没有，则基于\__proto__继续向上查找，直到找到Object.prototype为止..

### 自定义类的原型和原型链

实例.\__proto__  === 类.prototype

### Object.create([OBJECT])

创建一个空对象x，并且把[OBJECT]（这个值需要是一个对象）作为新对象的原型指向，x.\__proto__ = [OBJECT]

Object.create(null): 创建一个没有原型/原型链的空对象，这个对象不是任何类的实例









