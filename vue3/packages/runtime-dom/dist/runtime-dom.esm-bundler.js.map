{"version":3,"file":"runtime-dom.esm-bundler.js","sources":["../../shared/src/index.ts","../../runtime-core/src/vnode.ts","../../runtime-core/src/apiCreateApp.ts","../../runtime-core/src/componentPublicInstance.ts","../../runtime-core/src/component.ts","../../runtime-core/src/renderer.ts","../src/nodeOps.ts","../src/modules/attr.ts","../src/modules/class.ts","../src/modules/events.ts","../src/modules/style.ts","../src/patchProp.ts","../src/index.ts"],"sourcesContent":["export const isObject = (value) => typeof value === 'object' && value !== null;\r\nexport const extend = Object.assign;\r\nexport const isArray = Array.isArray;\r\nexport function isFunction(value): value is Function {\r\n  return typeof value === 'function';\r\n};\r\nexport const isNumber = value => typeof value === 'number';\r\nexport const isString = value => typeof value === 'string';\r\nexport const isIntegerKey = key => {\r\n  if (typeof key === 'symbol') return false;\r\n  return String(parseInt(key + '')) === key;\r\n};\r\n\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\nexport const hasOwn = (target, key) => hasOwnProperty.call(target, key);\r\n\r\nexport const hasChanged = (oldValue, value) => oldValue !== value;\r\n\r\n\r\nexport * from './shapeFlag';\r\n\r\nconst Shared = {\r\n  isObject,\r\n};\r\n\r\nexport {\r\n  Shared,\r\n};\r\n","// createVNode 创建虚拟节点\r\n\r\nimport { isArray, isObject, isString, ShapeFlags } from \"@vue/shared\";\r\n\r\n// h方法和createAPp类似\r\nexport const createVNode = (type, props, children = null) => {\r\n  // 可以根据type 来区分是组件还是普通的元素\r\n\r\n  const shapeFlag = isString(type) ?\r\n    ShapeFlags.ELEMENT : isObject(type) ?\r\n      ShapeFlags.STATEFUL_COMPONENT : 0\r\n\r\n  const vnode = { // 一个对象来描述对应的内容，虚拟节点有跨平台的能力\r\n    __v_isVnode: true,\r\n    type,\r\n    props,\r\n    children,\r\n    component: null,\r\n    key: props && props.key, // diff 算法会用到key\r\n    el: null, // 稍后会将虚拟节点和真实节点对应起来\r\n    shapeFlag, // 判断出自己的类型和儿子的类型\r\n  }\r\n  normailizeChildren(vnode, children);\r\n  return vnode;\r\n}\r\n\r\nfunction normailizeChildren(vnode, children) {\r\n  let type = 0;\r\n  if (children == null) { // 不对儿子进行处理\r\n    \r\n  } else if (isArray(children)) {\r\n    type = ShapeFlags.ARRAY_CHILDREN;\r\n  } else {\r\n    type = ShapeFlags.TEXT_CHILDREN;\r\n  }\r\n\r\n  vnode.shapeFlag |= type;\r\n}","import { createVNode } from \"./vnode\";\r\n\r\nexport function createAppAPI(render) {\r\n  return function(rootComponent, rootProps) {\r\n    const app = {\r\n      _props: rootProps,\r\n      _component: rootComponent,\r\n      _cantainer: null,\r\n      mount(container) {\r\n        // let vnode = {};\r\n        // render(vnode, container);\r\n        // console.log(container, rootComponent, rootProps, rendererOptions);\r\n\r\n        // 1.根据组件配置创建虚拟节点\r\n        // 2.将虚拟节点和容器获取到后调用render方法进行渲染\r\n\r\n        // 创造虚拟节点\r\n        const vnode = createVNode(rootComponent, rootProps);\r\n        // 调用render\r\n        render(vnode, container);\r\n\r\n\r\n        app._cantainer = container;\r\n      }\r\n    }\r\n    return app;\r\n  }\r\n}","import { hasOwn } from \"@vue/shared\";\r\n\r\nexport const PublicInstanceProxyHandlers = {\r\n  get({_: instance}, key) {\r\n    // 取值时 要访问 setupState Props data\r\n    const { setupState, props, data } = instance;\r\n    if (key[0] === '$') {\r\n      return;\r\n    }\r\n    if (hasOwn(setupState, key)) {\r\n      return setupState[key];\r\n    } else if (hasOwn(props, key)) {\r\n      return props[key];\r\n    } else if (hasOwn(data, key)) {\r\n      return data[key];\r\n    }\r\n\r\n    return undefined;\r\n  },\r\n  set({_: instance}, key, value) {\r\n    const { setupState, props, data } = instance;\r\n    if (hasOwn(setupState, key)) {\r\n      setupState[key] = value;\r\n    } else if (hasOwn(props, key)) {\r\n      props[key] = value;\r\n    } else if (hasOwn(data, key)) {\r\n      data[key] = value;\r\n    }\r\n    return true;\r\n  }\r\n}","// 组件所有的方法\r\n\r\nimport { ShapeFlags } from \"@vue/shared\";\r\nimport { PublicInstanceProxyHandlers } from \"./componentPublicInstance\";\r\n\r\nexport function createComponentInstance(vnode) {\r\n\r\n  // webcomponent 组件需要有“属性” “插槽”\r\n  const instance = { // 组件的实例\r\n    vnode,\r\n    type: vnode.type,\r\n    props: {},\r\n    attrs: {},\r\n    slots: {},\r\n    ctx: {},\r\n    data: {},\r\n    setupState: {}, // 如果setup返回一个对象，这个对象会作为setupstate\r\n    isMounted: false,\r\n  };\r\n  instance.ctx = { _: instance };\r\n\r\n  return instance;\r\n}\r\n\r\nexport function setupComponent(instance) {\r\n  const { props, children } = instance.vnode;\r\n\r\n  // 根据props 解析出 props 和 attrs ， 将其放到instance上\r\n  instance.props = props; // initProps()\r\n  instance.children = children; // initSlot()\r\n\r\n  // 需要先看下 当前组件是不是有状态的组件\r\n  let isStateful = instance.vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT;\r\n\r\n  if (isStateful) { // 表示现在是一个带状态的组件\r\n    // 调用当前实例的setup方法，用setup的返回值 填充 setupState和对应的render方法\r\n\r\n    setupStatefulComponent(instance);\r\n  }\r\n}\r\n\r\nfunction setupStatefulComponent(instance) {\r\n  // 代理  传递给render函数的参数\r\n  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers);\r\n\r\n  // 获取组件的类型 拿到组件的setup方法\r\n  let Component = instance.type;\r\n  let { setup } = Component;\r\n  let setupContext = createSetupContext(instance);\r\n\r\n  // 有可能没有setup 没有render\r\n  instance.setupState = setup(instance.props, setupContext); // instance 中的props attrs slots emit expose 会被提取出来\r\n  Component.render(instance.proxy);\r\n}\r\n\r\nfunction createSetupContext(instance) {\r\n  return {\r\n    attrs: instance.attrs,\r\n    props: instance.props,\r\n    slots: instance.slots,\r\n    emit: () => { },\r\n    expose: () => { },\r\n  }\r\n}","import { ShapeFlags } from \"@vue/shared\";\r\nimport { createAppAPI } from \"./apiCreateApp\"\r\nimport { createComponentInstance, setupComponent } from \"./component\";\r\n\r\nexport function createRenderer(rendererOptions) {\r\n\r\n  const setupRenderEffect = () => {\r\n    \r\n  }\r\n\r\n  const mountComponent = (initialVNode, container) => {\r\n    // 组件的渲染流程  最核心就是调用setup拿到返回值， 获取render函数返回的结果来进行渲染\r\n    // 1. 先有实例\r\n    const instance = (initialVNode.component = createComponentInstance(initialVNode));\r\n    // 2. 需要的数据解析到实例上\r\n    setupComponent(instance);\r\n    // 3. 创建一个effect 让render执行\r\n    setupRenderEffect()\r\n  }\r\n\r\n  const processComponent = (n1, n2, container) => {\r\n    if (n1 == null) {\r\n      // 初始化流程\r\n      mountComponent(n2, container);\r\n    } else {\r\n      // 组件更新\r\n    }\r\n  }\r\n\r\n  const patch = (n1, n2, container) => {\r\n    // 针对不同类型 做初始化操作\r\n    const { shapeFlag } = n2;\r\n    if (shapeFlag & ShapeFlags.ELEMENT) {\r\n      console.log('元素');\r\n    } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\r\n      processComponent(n1, n2, container);\r\n    }\r\n  }\r\n\r\n  const render = (vnode, container) => {\r\n    // core 核心函数; 根据不同的虚拟节点创建对应的真实元素\r\n\r\n    // 默认调用render 可能是初始化流程\r\n    patch(null, vnode, container);\r\n  }\r\n  return {\r\n    createApp: createAppAPI(render),\r\n  }\r\n}\r\n\r\n// createRenderer 目的是创建一个渲染器\r\n\r\n// 框架都是将组件转换成 虚拟DOM -> 虚拟DOM生成真是DOM挂载到真实页面上","// 节点操作\r\nexport const nodeOps = {\r\n  // 元素操作\r\n  createElement: tagName => document.createElement(tagName),\r\n  remove: child => {\r\n    const parent = child.parentNode;\r\n    if (parent) {\r\n      parent.removeChild(child);\r\n    }\r\n  },\r\n  insert: (child, parent, anchor = null) => {\r\n    parent.insertBefore(child, anchor);\r\n  },\r\n  querySelector: selector => document.querySelector(selector),\r\n  setElementText: (el, text) => el.textContent = text,\r\n  // 文本操作\r\n  createText: text => document.createTextNode(text),\r\n  setText: (node, text) => node.nodeValue = text,\r\n}","export const patchAttr = (el, key, value) => {\r\n  if (value == null) {\r\n    el.removeAttribute(key);\r\n  } else {\r\n    el.setAttribute(key, value);\r\n  }\r\n}","export const patchClass = (el, value) => {\r\n  if (value == null) {\r\n    value = '';\r\n  }\r\n\r\n  el.className = value;\r\n}","export const patchEvent = (el, key, value) => {\r\n  // 对函数的缓存 \r\n  const invokers = el.vei || (el.vei = {});\r\n\r\n  const exists = invokers[key];\r\n\r\n  if (exists && value) { // 需要绑定事件并且之前存在事件的情况下 去更新事件绑定\r\n    exists.value = value;\r\n  } else {\r\n    const eventName = key.slice(2).toLowerCase();\r\n    if (value) {\r\n      let invoker = invokers[key] = createInvoker(value);\r\n      el.addEventListener(eventName, invoker);\r\n    } else {\r\n      // 以前绑定了value 现在没有value\r\n      // 移除事件\r\n      el.removeEventListener(eventName, exists);\r\n      invokers[key] = undefined;\r\n    }\r\n  }\r\n}\r\n\r\nfunction createInvoker(value: Function): Function {\r\n  const invoker = (e) => {\r\n    invoker.value(e);\r\n  }\r\n  invoker.value = value; // 为了能随时更改\r\n  return invoker;\r\n}","export const patchStyle = (el, prev, next) => {\r\n  const style = el.style; // 获取样式\r\n  if (next == null) {\r\n    el.removeAttribute('style');\r\n  } else {\r\n    // diff style 新加的要加上  新的没有的要去掉\r\n\r\n    if (prev) {\r\n      for (const key in prev) {\r\n        if (next[key] == null) { // 老的有 新的没有  要去掉\r\n          style[key] = '';\r\n        }\r\n      }\r\n    }\r\n\r\n    for (const key in next) {\r\n      style[key] = next[key];\r\n    }\r\n  }\r\n}","// 针对属性操作\r\n\r\nimport { patchAttr } from \"./modules/attr\";\r\nimport { patchClass } from \"./modules/class\";\r\nimport { patchEvent } from \"./modules/events\";\r\nimport { patchStyle } from \"./modules/style\";\r\n\r\nexport const isEvent = key => /^on[^a-z]/.test(key);\r\n\r\nexport const patchProp = (el, key, preValue, nextValue) => {\r\n  switch (key) {\r\n    case 'class':\r\n      patchClass(el, nextValue);\r\n      break;\r\n    case 'style':\r\n      patchStyle(el, preValue, nextValue);\r\n      break;\r\n    default:\r\n      // 如果不是事件 才是属性\r\n      if (isEvent(key)) {\r\n        patchEvent(el, key, nextValue);\r\n      } else {\r\n        patchAttr(el, key, nextValue);\r\n      }\r\n  }\r\n}","// runtime-dom 核心就是 提供domAPI方法\r\n// 操作节点，操作属性的更新\r\n\r\nimport { createRenderer } from \"@vue/runtime-core\";\r\nimport { extend } from \"@vue/shared\";\r\nimport { nodeOps } from \"./nodeOps\";\r\nimport { patchProp } from \"./patchProp\";\r\n\r\n// 节点操作就是增删改查\r\n// 属性操作 添加 删除 更新 (样式，类，事件，其他属性)\r\n\r\n// 渲染时用到的所有方法\r\nconst rendererOptions = extend({ patchProp }, nodeOps);\r\n\r\n// vue中 runtime-core 提供了核心的方法 来处理渲染 他会使用runtime-dom中的api进行渲染\r\nexport function createApp(rootComponent, rootProps = null) {\r\n  const app: any = createRenderer(rendererOptions).createApp(rootComponent, rootProps);\r\n  let { mount } = app;\r\n  app.mount = function (container) {\r\n    // 清空容器的操作\r\n    container = nodeOps.querySelector(container);\r\n    container.innerHTML = '';\r\n    mount(container);\r\n    // 将组件渲染成dom元素 进行挂载\r\n  }\r\n  return app;\r\n}\r\n\r\n// 用户调用的是runtime-dom -> runtime-core\r\n// runtime-dom 是为了解决平台差异的 (浏览器差异)"],"names":[],"mappings":"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"}