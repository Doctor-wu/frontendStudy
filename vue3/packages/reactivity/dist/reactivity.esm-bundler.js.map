{"version":3,"file":"reactivity.esm-bundler.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts"],"sourcesContent":["export const isObject = (value) => typeof value === 'object' && value !== null;\r\nexport const extend = Object.assign;\r\nexport const isArray = Array.isArray;\r\nexport const isFunction = value => typeof value === 'function';\r\nexport const isNumber = value => typeof value === 'number';\r\nexport const isString = value => typeof value === 'string';\r\nexport const isIntegerKey = key => {\r\n  if (typeof key === 'symbol') return false;\r\n  return String(parseInt(key + '')) === key;\r\n};\r\n\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\nexport const hasOwn = (target, key) => hasOwnProperty.call(target, key);\r\n\r\nexport const hasChanged = (oldValue, value) => oldValue !== value;\r\n\r\n\r\nconst Shared = {\r\n  isObject,\r\n};\r\n\r\nexport {\r\n  Shared,\r\n};\r\n","import { isArray, isIntegerKey } from \"@vue/shared\";\r\nimport { TrackOpTypes, TriggerOpTypes } from \"./operators\";\r\n\r\nexport function effect(fn: Function, options: any = {}) {\r\n  // 需要让这个effect变成响应式的effect, 可以做到数据变化重新执行\r\n  const effective = createReactiveEffect(fn, options);\r\n\r\n  if (!options.lazy) {\r\n    effective();\r\n  }\r\n\r\n  return effective;\r\n}\r\n\r\nlet eid = 0;\r\nlet effectStack = [];\r\nlet activeEffect = null;\r\nfunction createReactiveEffect(fn: Function, options: any = {}):Function {\r\n  const effective = function reactiveEffect() {\r\n    if (!effectStack.includes(effective)) {\r\n      try {\r\n        effectStack.push(effective);\r\n        activeEffect = effective;\r\n        return fn();\r\n      } finally {\r\n        effectStack.pop();\r\n        activeEffect = effectStack[effectStack.length - 1];\r\n      }\r\n    } else {\r\n      console.warn('circular assign effect!');\r\n    }\r\n  };\r\n  effective.id = eid++; // 区分effect\r\n  effective._isEffect = true; // 用于标识这个是响应式effect\r\n  effective.raw = fn;\r\n  effective.options = options;\r\n\r\n  return effective;\r\n}\r\n\r\nconst targetMap = new WeakMap();\r\nexport function track(target, type:TrackOpTypes, key) {\r\n  if (activeEffect) {\r\n    // target对应的Map\r\n    let depsMap = targetMap.get(target);\r\n    if (!depsMap) {\r\n      targetMap.set(target, (depsMap = new Map));\r\n    }\r\n    // target对应的Map中 对应的key对应的Set\r\n    let deps = depsMap.get(key);\r\n    if (!deps) {\r\n      depsMap.set(key, (deps = new Set));\r\n    }\r\n    if (!deps.has(activeEffect)) {\r\n      deps.add(activeEffect);\r\n    }\r\n  }\r\n}\r\n\r\n// 找属性对应的effect 让其执行 (数组，对象)\r\nexport function trigger(target, type: TriggerOpTypes, key?, newValue?, oldValue?) {\r\n  // 如果这个属性没有收集过effect 那不需要做任何操作\r\n  const depsMap = targetMap.get(target);\r\n  if (!depsMap) return;\r\n\r\n  // 将所有要执行的effect 全部存到一个新的集合中，最终一起执行\r\n  const effects = new Set();\r\n  const add = effectsToAdd => {\r\n    if (effectsToAdd) {\r\n      effectsToAdd.forEach(effect => {\r\n        effects.add(effect);\r\n      });\r\n    }\r\n  }\r\n\r\n  //  1. 看修改的是不是数组的长度 因为该长度影响比较大\r\n  if (key === 'length' && isArray(target)) {\r\n    depsMap.forEach((dep, key) => {\r\n      // 如果对应的长度 有依赖收集需要更新\r\n      if (key === 'length' || (isIntegerKey(key) && key > newValue)) { // 如果更改的长度小于收集的索引，那么这个索引也需要触发effect重新执行\r\n        add(dep);\r\n      }\r\n    });\r\n  } else {\r\n    // 可能是对象\r\n    if (key !== undefined) {\r\n      add(depsMap.get(key));\r\n    }\r\n    // 如果修改数组中的某一个索引\r\n    switch (type) {\r\n      case TriggerOpTypes.ADD:\r\n        if (isArray(target) && isIntegerKey(key)) {\r\n          add(depsMap.get('length'));\r\n        }\r\n    }\r\n  }\r\n\r\n  effects.forEach((effect: Function) => effect());\r\n}","import { extend, hasChanged, hasOwn, isArray, isIntegerKey, isNumber, isObject } from \"@vue/shared\";\r\nimport { track, trigger } from \"./effect\";\r\nimport { TrackOpTypes, TriggerOpTypes } from \"./operators\";\r\nimport { reactive, readonly } from \"./reactive\";\r\n\r\nfunction createGetter(\r\n  isReadonly = false,\r\n  shallow = false\r\n) {\r\n  return function get(target, key, receiver) {\r\n    const res = Reflect.get(target, key, receiver);\r\n\r\n    if (!isReadonly) {\r\n      // 不是仅读的，就收集依赖，数据改变后更新对应的视图\r\n      track(target, TrackOpTypes.GET, key);\r\n    }\r\n\r\n    if (shallow) {\r\n      return res;\r\n    }\r\n\r\n    if (isObject(res)) {\r\n      return isReadonly ? readonly(res) : reactive(res);\r\n    }\r\n\r\n    return res;\r\n  }\r\n};\r\n\r\nfunction createSetter(\r\n  shallow = false\r\n) {\r\n  return function set(target, key, value, receiver) {\r\n    const oldValue = Reflect.get(target, key, receiver);\r\n    // 判断对象中是否已经存在对应的key\r\n    const hasKey = isArray(target)\r\n      && isIntegerKey(key)\r\n      ? Number(key) < target.length\r\n      : hasOwn(target, key);\r\n    const result = Reflect.set(target, key, value, receiver);\r\n    \r\n    if (!hasKey) {\r\n      // 新增的值\r\n      trigger(target, TriggerOpTypes.ADD, key, value);\r\n    } else if (hasChanged(oldValue, value)) {\r\n      // 修改的值\r\n      trigger(target, TriggerOpTypes.SET, key, value, oldValue);\r\n    }\r\n\r\n    // 当数据更新时，通知对应属性的effect重新执行\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nconst get = createGetter();\r\nconst shallowGet = createGetter(false, true);\r\nconst readonlyGet = createGetter(true);\r\nconst shallowReadonlyGet = createGetter(true, true);\r\n\r\nconst set = createSetter();\r\nconst shallowSet = createSetter(true);\r\n\r\nconst readonlyObject = {\r\n  set: (target, key) => {\r\n    console.warn(`set on key [${key}] failed , [${key}']s originValue is ${target[key]}`);\r\n  }\r\n};\r\n\r\nexport const mutableHandlers = {\r\n  get,\r\n  set,\r\n};\r\n\r\nexport const shallowReactiveHandlers = {\r\n  get: shallowGet,\r\n  set: shallowSet,\r\n};\r\n\r\nexport const readonlyHandlers = extend({\r\n  get: readonlyGet,\r\n}, readonlyObject);\r\n\r\nexport const shallowReadonlyHandlers = extend({\r\n  get: shallowReadonlyGet,\r\n}, readonlyObject);\r\n","import { isObject } from \"@vue/shared\";\r\nimport { mutableHandlers, readonlyHandlers, shallowReactiveHandlers } from \"./baseHandlers\";\r\n\r\nexport function reactive(target) {\r\n  return createReactiveObject(target, false, mutableHandlers);\r\n};\r\n\r\nexport function shallowReactive(target) {\r\n  return createReactiveObject(target, false, shallowReactiveHandlers);\r\n};\r\n\r\nexport function readonly(target) {\r\n  return createReactiveObject(target, true, readonlyHandlers);\r\n};\r\n\r\nexport function shallowReadonly(target) {\r\n  return createReactiveObject(target, true, shallowReactiveHandlers);\r\n};\r\n\r\nconst reactiveMap = new WeakMap(); // 会自动垃圾回收，不会造成内存泄漏\r\nconst readonlyMap = new WeakMap();\r\n\r\nexport function createReactiveObject(target, isReadonly: boolean, baseHandlers) {\r\n  // 如果目标不是对象，那就没法拦截\r\n  if (!isObject(target)) {\r\n    return target;\r\n  }\r\n\r\n  const proxyMap = isReadonly ? reactiveMap : readonlyMap;\r\n\r\n  const exisitProxy = proxyMap.get(target);\r\n  if (exisitProxy) return exisitProxy;\r\n\r\n  const proxy = new Proxy(target, baseHandlers);\r\n  proxyMap.set(target, proxy); // 将要代理的对象和对应的代理结果缓存起来\r\n\r\n  return proxy;\r\n};","import { hasChanged, hasOwn, isArray } from \"@vue/shared\";\r\nimport { track, trigger } from \"./effect\";\r\nimport { TrackOpTypes, TriggerOpTypes } from \"./operators\";\r\nimport { reactive } from \"./reactive\";\r\n\r\n// ref 内部使用的是defineProperty\r\nexport function ref(value) {\r\n  // 将普通类型变成一个对象, 也可以是对象，但是一般情况下对象用reactive更合理\r\n  return createRef(value);\r\n}\r\n\r\nexport function shallowRef(value) {\r\n  return createRef(value, true);\r\n}\r\n\r\nclass RefImpl {\r\n  public _value; // 表示声明了一个_value属性 但是没有赋值\r\n  public readonly __v_isRef = true; // 表示是一个ref属性\r\n  constructor(public rawValue, public shallow) {\r\n    this._value = shallow ? rawValue : reactive(rawValue);\r\n  }\r\n\r\n  get value() {\r\n    track(this, TrackOpTypes.GET, 'value');\r\n    return this._value;\r\n  }\r\n  \r\n  set value(newValue) {\r\n    if (hasChanged(this._value, newValue)) {\r\n      this.rawValue = newValue;\r\n      this._value = newValue;\r\n      trigger(this, TriggerOpTypes.SET, 'value', newValue);\r\n    }\r\n  }\r\n}\r\n\r\nfunction createRef(rawValue, shallow = false) {\r\n  return new RefImpl(rawValue, shallow);\r\n}\r\n\r\nclass ObjectRefImpl {\r\n  public readonly __v_isRef = true; // 表示是一个ref属性\r\n  constructor(public target, public key) {\r\n  }\r\n\r\n  get value() {\r\n    return this.target[this.key];\r\n  }\r\n\r\n  set value(newValue) {\r\n    this.target[this.key] = newValue;\r\n  }\r\n}\r\n// 将某一个key对应的值转换成ref\r\nexport function toRef(target, key) { // 可以将一个对象的属性变成ref\r\n  return new ObjectRefImpl(target, key);\r\n}\r\n\r\nexport function toRefs(object: Object | Array<unknown>) {\r\n  const ret = isArray(object) ? new Array(object.length) : {};\r\n  for (const key in object) {\r\n    if (hasOwn(object, key)) {\r\n      ret[key] = toRef(object, key);\r\n    }\r\n  }\r\n  return ret;\r\n}"],"names":[],"mappings":"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"}